{% extends "base.html" %}
{% block title %}설정{% endblock %}

{% block content %}
<div class="admin-section">
  <p class="admin-label">SYSTEM</p>
  <h1 class="admin-title">설정</h1>
</div>

<!-- 사이트 정보 -->
<div class="admin-section">
  <p class="admin-label">사이트 설정</p>
  <div class="settings-info">
    <div class="info-row">
      <span class="info-key">SITE_BASE_URL</span>
      <span class="info-val">{{ site_base_url }}</span>
    </div>
    <div class="info-row">
      <span class="info-key">Admin Port</span>
      <span class="info-val">5001</span>
    </div>
    <div class="info-row">
      <span class="info-key">Backend Port</span>
      <span class="info-val">5000</span>
    </div>
  </div>
</div>

<!-- 비밀번호 변경 -->
<div class="admin-section">
  <p class="admin-label">비밀번호 변경</p>
  <p class="admin-desc" style="margin-bottom:1.5rem;">
    변경 후 .env의 ADMIN_PASSWORD_HASH도 업데이트해야 재시작 후에도 유지됩니다.
  </p>
  <form method="post" action="/settings/password" class="settings-form">
    <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
    <div class="form-group">
      <label>현재 비밀번호</label>
      <input type="password" name="current" required autocomplete="current-password">
    </div>
    <div class="form-group">
      <label>새 비밀번호 (8자 이상)</label>
      <input type="password" name="new_password" required autocomplete="new-password" minlength="8">
    </div>
    <div class="form-group">
      <label>새 비밀번호 확인</label>
      <input type="password" name="confirm" required autocomplete="new-password">
    </div>
    <button type="submit" class="admin-action-btn">변경</button>
  </form>
</div>

<style>
.settings-info {
  border: 1px solid var(--line);
}

.info-row {
  display: flex;
  padding: 0.8rem 1.2rem;
  border-bottom: 1px solid var(--line);
  font-size: 0.85rem;
}

.info-row:last-child { border-bottom: none; }

.info-key {
  width: 180px;
  flex-shrink: 0;
  font-family: var(--font-mono, monospace);
  font-size: 0.78rem;
  color: var(--text-sub);
}

.info-val {
  color: var(--text);
}

.settings-form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-width: 400px;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
}

.form-group label {
  font-size: 0.65rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text-faint);
}

.form-group input {
  border: 1px solid var(--line);
  background: var(--bg);
  padding: 0.55rem 0.8rem;
  font-size: 0.88rem;
  font-family: var(--font-kr);
  outline: none;
}

.form-group input:focus { border-color: var(--text); }
</style>
{% endblock %}
