# 97layerOS MCP-GDrive Server
# Purpose: Container-isolated MCP server for Google Drive knowledge base integration
# Philosophy: Container-First protocol - no native Mac environment pollution

FROM node:20-slim

LABEL maintainer="97layerOS Technical Director"
LABEL description="MCP Server for Google Drive - NotebookLM Knowledge Base Integration"

# Install MCP Google Drive server globally
RUN npm install -g @modelcontextprotocol/server-google-drive

# Create app directory for credentials mount
RUN mkdir -p /app/credentials

# Set working directory
WORKDIR /app

# Environment variables (overridden by --env-file at runtime)
ENV GOOGLE_APPLICATION_CREDENTIALS=/app/credentials/gdrive_auth.json
ENV GOOGLE_DRIVE_FOLDER_ID=""

# Health check: Verify node and mcp-server-google-drive are available
RUN node --version && \
    npm list -g @modelcontextprotocol/server-google-drive

# Entry point: Start MCP server in stdio mode
# Claude Desktop will communicate via stdin/stdout
ENTRYPOINT ["mcp-server-google-drive"]
