<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Archive — WOOHWAHAE">
  <title>Archive — WOOHWAHAE</title>
  <meta name="theme-color" content="#E3E2E0">
  <link rel="icon" href="../assets/img/symbol.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,300;0,400;1,300&family=Crimson+Text:ital,wght@1,400&display=swap">
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css">
  <link rel="stylesheet" href="../assets/css/style.css">
  <script>
    (function () { var h = new Date().getHours(); document.documentElement.className = h < 6 ? 'time-dawn' : h < 18 ? 'time-day' : h < 22 ? 'time-evening' : 'time-night'; })();
  </script>
</head>

<body class="page-archive">

  <nav class="site-nav" id="site-nav">
    <a href="/" class="nav-brand">WOOHWAHAE</a>
    <ul class="nav-links" id="nav-links">
      <li><a href="../archive/" class="active">Archive</a></li>
      <li><a href="../practice/">Practice</a></li>
      <li><a href="../about/">About</a></li>
    </ul>
    <button class="nav-toggle" id="nav-toggle" aria-label="메뉴" aria-expanded="false">
      <span></span><span></span>
    </button>
  </nav>

  <main class="page-main">

    <div class="archive-hero container--wide">
      <span class="section-label">ARCHIVE</span>
    </div>

    <!-- 필터 -->
    <div class="archive-filter container--wide" role="tablist">
      <button class="filter-btn active" data-filter="all" role="tab" aria-selected="true">ALL</button>
      <button class="filter-btn" data-filter="essay" role="tab" aria-selected="false">ESSAY</button>
      <button class="filter-btn" data-filter="magazine" role="tab" aria-selected="false">MAGAZINE</button>
      <button class="filter-btn" data-filter="lookbook" role="tab" aria-selected="false">LOOKBOOK</button>
    </div>

    <!-- 카드 그리드 -->
    <div class="archive-grid container--wide" id="archive-grid">
      <!-- JS로 index.json 기반 렌더링 -->
    </div>

  </main>

  <footer class="site-footer">
    <div class="footer-inner">
      <p class="footer-brand">WOOHWAHAE</p>
      <nav class="footer-nav">
        <a href="../archive/">Archive</a>
        <a href="../practice/">Practice</a>
        <a href="../about/">About</a>
        <a href="https://instagram.com/woohwahae" target="_blank" rel="noopener">Instagram</a>
      </nav>
      <div class="footer-legal">
        <a href="../privacy.html">Privacy</a>
        <a href="../terms.html">Terms</a>
      </div>
      <p class="footer-copy">&copy; 2026 WOOHWAHAE</p>
    </div>
  </footer>

  <script src="../assets/js/site.js" defer></script>
  <script>
    /* Archive 카드 렌더링 */
    fetch('index.json')
      .then(function (r) { return r.json(); })
      .then(function (posts) {
        var grid = document.getElementById('archive-grid');
        if (!grid || !posts.length) return;
        posts.forEach(function (p, i) {
          var card = document.createElement('a');
          card.href = p.slug + '/';
          card.className = 'archive-card';
          card.dataset.category = p.category || 'essay';
          card.style.animationDelay = (i * 0.06) + 's';
          card.setAttribute('data-reveal', '');
          card.innerHTML =
            '<span class="archive-card__label">' + (p.issue || '') + '</span>' +
            '<strong class="archive-card__title">' + p.title + '</strong>' +
            '<span class="archive-card__date">' + p.date + '</span>' +
            (p.preview ? '<span class="archive-card__preview">' + p.preview + '</span>' : '');
          grid.appendChild(card);
        });

        /* 필터 */
        document.querySelectorAll('.filter-btn').forEach(function (btn) {
          btn.addEventListener('click', function () {
            var f = this.dataset.filter;
            document.querySelectorAll('.filter-btn').forEach(function (b) {
              b.classList.remove('active');
              b.setAttribute('aria-selected', 'false');
            });
            this.classList.add('active');
            this.setAttribute('aria-selected', 'true');
            document.querySelectorAll('.archive-card').forEach(function (c) {
              c.hidden = (f !== 'all' && c.dataset.category !== f);
            });
          });
        });

        /* Intersection reveal */
        var obs = new IntersectionObserver(function (entries) {
          entries.forEach(function (e) {
            if (e.isIntersecting) { e.target.classList.add('is-visible'); obs.unobserve(e.target); }
          });
        }, { threshold: 0.1 });
        document.querySelectorAll('[data-reveal]').forEach(function (el) { obs.observe(el); });
      })
      .catch(function () { console.warn('archive: index.json 없음'); });
  </script>
</body>

</html>